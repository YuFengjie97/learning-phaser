var g=Object.defineProperty;var f=(h,r,e)=>r in h?g(h,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[r]=e;var s=(h,r,e)=>(f(h,typeof r!="symbol"?r+"":r,e),e);import{P as l}from"./phaser-12b41bc6.js";import{g as i}from"./public-97fb009b.js";import{d as y,r as b,o as v,c as w,a as B,_ as x}from"./index-2c91a40f.js";const t={audio:{die:"die",hit:"hit",point:"point",swoosh:"swoosh",wing:"wing"},scene:{width:288,height:512,gravity:600},player:{prePos:{x:60,y:300},flapSpeed:200},bg:{static:"bgDay"},startMenu:{static:"startMenu"},gameOver:{static:"gameOver"},restart:{static:"restart"},pipe:{height:320,width:52,speed:-100,gap:140,timeGap:130,top:{static:"pipeTop"},bottom:{static:"pipeBottom"}},ground:{static:"ground",animate:{moving:"groundMoving",stop:"groundStop"}},birdRed:{static:"birdRed",animate:{flap:"birdRedFlap",stop:"birdRedStop"}},nums:{widht:24,height:36,static:{num0:"num0",num1:"num1",num2:"num2",num3:"num3",num4:"num4",num5:"num5",num6:"num6",num7:"num7",num8:"num8",num9:"num9"}}};class G extends l.Scene{constructor(){super("Preload")}preload(){const{width:r,height:e}=t.scene,a=this.add.graphics(),p=this.add.graphics();p.fillStyle(2236962,.8),p.fillRect(20,270,248,50),this.make.text({x:r/2,y:e/2,text:"Loading...",style:{font:"20px monospace",color:"#ffffff"}}).setOrigin(.5,.5);const o=this.make.text({x:r/2,y:e/2+40,text:"0%",style:{font:"18px monospace",color:"#ffffff"}});o.setOrigin(.5,.5);const n=this.make.text({x:r/2,y:e/2+80,text:"",style:{font:"18px monospace",color:"#ffffff"}});n.setOrigin(.5,.5),this.load.on("progress",function(d){a.clear(),a.fillStyle(16777215,1),a.fillRect(30,280,228*d,30),o.setText((d*100).toFixed(0)+"%")}),this.load.on("fileprogress",function(d){n.setText("Loading asset: "+d.key)}),this.load.on("complete",function(d){console.log("complete"),a.destroy(),p.destroy()}),this.load.image(t.bg.static,i("flappyBird/sprites/background-day.png")),this.load.spritesheet(t.ground.static,i("flappyBird/sprites/ground-sprite.png"),{frameWidth:336,frameHeight:112}),this.load.image(t.startMenu.static,i("flappyBird/sprites/message-initial.png")),this.load.image(t.gameOver.static,i("flappyBird/sprites/gameover.png")),this.load.image(t.restart.static,i("flappyBird/sprites/restart-button.png")),this.load.image(t.pipe.top.static,i("flappyBird/sprites/pipe-green-top.png")),this.load.image(t.pipe.bottom.static,i("flappyBird/sprites/pipe-green-bottom.png")),this.load.image(t.nums.static.num0,i("flappyBird/sprites/number0.png")),this.load.image(t.nums.static.num1,i("flappyBird/sprites/number1.png")),this.load.image(t.nums.static.num2,i("flappyBird/sprites/number2.png")),this.load.image(t.nums.static.num3,i("flappyBird/sprites/number3.png")),this.load.image(t.nums.static.num4,i("flappyBird/sprites/number4.png")),this.load.image(t.nums.static.num5,i("flappyBird/sprites/number5.png")),this.load.image(t.nums.static.num6,i("flappyBird/sprites/number6.png")),this.load.image(t.nums.static.num7,i("flappyBird/sprites/number7.png")),this.load.image(t.nums.static.num8,i("flappyBird/sprites/number8.png")),this.load.image(t.nums.static.num9,i("flappyBird/sprites/number9.png")),this.load.spritesheet(t.birdRed.static,i("flappyBird/sprites/bird-red-sprite.png"),{frameWidth:34,frameHeight:24}),this.load.audio(t.audio.die,[i("flappyBird/audio/die.ogg"),i("flappyBird/audio/die.wav")]),this.load.audio(t.audio.hit,[i("flappyBird/audio/hit.ogg"),i("flappyBird/audio/hit.wav")]),this.load.audio(t.audio.point,[i("flappyBird/audio/point.ogg"),i("flappyBird/audio/point.wav")]),this.load.audio(t.audio.swoosh,[i("flappyBird/audio/swoosh.ogg"),i("flappyBird/audio/swoosh.wav")]),this.load.audio(t.audio.wing,[i("flappyBird/audio/wing.ogg"),i("flappyBird/audio/wing.wav")])}create(){this.scene.start("Game")}}class S extends l.Scene{constructor(){super("Game");s(this,"score",0);s(this,"gameOver",!1);s(this,"gameStart",!1);s(this,"bg");s(this,"ground");s(this,"startMenu");s(this,"gameOverInfo");s(this,"restart");s(this,"player");s(this,"pipesGroup");s(this,"gapsGroup");s(this,"scoreGroup");s(this,"nextPipe",0);s(this,"upButton");s(this,"soundHit");s(this,"soundDie");s(this,"soundSwoosh");s(this,"soundWing");s(this,"soundPoint")}create(){const{width:e,height:a}=t.scene;this.bg=this.add.image(0,0,t.bg.static).setOrigin(0,0).setInteractive().on("pointerdown",()=>{this.gameStart&&this.flap()}),this.ground=this.physics.add.sprite(e/2,500,t.ground.static),this.ground.setCollideWorldBounds(!0),this.ground.setDepth(10),this.anims.create({key:t.ground.animate.moving,frames:this.anims.generateFrameNumbers(t.ground.static,{start:0,end:2}),frameRate:15,repeat:-1}),this.anims.create({key:t.ground.animate.stop,frames:[{key:t.ground.static,frame:0}],frameRate:20}),this.anims.create({key:t.birdRed.animate.flap,frames:this.anims.generateFrameNumbers(t.birdRed.static,{start:0,end:2}),frameRate:10,repeat:-1}),this.anims.create({key:t.birdRed.animate.stop,frames:[{key:t.birdRed.static,frame:1}],frameRate:20}),this.pipesGroup=this.physics.add.group(),this.gapsGroup=this.physics.add.group(),this.scoreGroup=this.physics.add.staticGroup(),this.scoreGroup.setDepth(30),this.startMenu=this.add.image(e/2,a/2,t.startMenu.static),this.startMenu.setDepth(30),this.startMenu.setInteractive().on("pointerdown",()=>{this.start()}),this.startMenu.visible=!1,this.gameOverInfo=this.add.image(e/2,200,t.gameOver.static),this.gameOverInfo.visible=!1,this.restart=this.add.image(e/2,300,t.restart.static).setInteractive().on("pointerdown",()=>{this.reStart()}),this.restart.visible=!1,this.gameOverInfo.setDepth(30),this.restart.setDepth(30),this.upButton=this.input.keyboard.addKey(l.Input.Keyboard.KeyCodes.SPACE),this.soundDie=this.sound.add(t.audio.die),this.soundHit=this.sound.add(t.audio.hit),this.soundWing=this.sound.add(t.audio.wing),this.soundSwoosh=this.sound.add(t.audio.swoosh),this.soundPoint=this.sound.add(t.audio.point),this.prepareGame()}update(){!this.gameStart||this.gameOver||(this.player.angle<90&&(this.player.angle+=1),l.Input.Keyboard.JustDown(this.upButton)&&this.flap(),this.updatePipes())}start(){this.player.body.allowGravity=!0,this.gameStart=!0,this.startMenu.visible=!1}reStart(){this.physics.resume(),this.pipesGroup.clear(!0,!0),this.gapsGroup.clear(!0,!0),this.gameOver=!1,this.gameStart=!1,this.score=0,this.gameOverInfo.visible=!1,this.restart.visible=!1,this.player.destroy(),this.prepareGame()}prepareGame(){this.startMenu.visible=!0,this.ground.anims.play(t.ground.animate.moving,!0),this.player=this.physics.add.sprite(t.player.prePos.x,t.player.prePos.y,t.birdRed.static),this.player.setCollideWorldBounds(!0),this.player.anims.play(t.birdRed.animate.flap,!0),this.player.body.allowGravity=!1,this.physics.add.collider(this.player,this.ground,this.hitBird,void 0,this),this.physics.add.collider(this.player,this.pipesGroup,this.hitBird,void 0,this),this.physics.add.overlap(this.player,this.gapsGroup,this.updateScore,void 0,this),this.updateScoreBoard()}flap(){this.gameOver||(this.soundWing.play(),this.player.setVelocityY(-t.player.flapSpeed),this.player.angle=-15)}createPipe(){const{width:e}=t.scene,{width:a,height:p,gap:u,speed:o}=t.pipe,n=l.Math.Between(-p/2+40,p/2-40),d=this.pipesGroup.create(e+a/2,n,t.pipe.top.static);d.body.allowGravity=!1,d.body.setVelocityX(t.pipe.speed);const m=this.pipesGroup.create(e+a/2,n+t.pipe.height+u,t.pipe.bottom.static);m.body.allowGravity=!1,m.body.setVelocityX(o);const c=this.add.line(e+a,n+p/2,0,0,0,u,16711680).setOrigin(0,0);this.gapsGroup.add(c),c.body.allowGravity=!1,c.body.setVelocityX(t.pipe.speed),c.visible=!1}updatePipes(){this.pipesGroup.children.iterate(function(e){e&&e.x<-50&&e.destroy()}),this.gapsGroup.children.iterate(function(e){e&&e.x<-50&&e.destroy()}),this.nextPipe++,this.nextPipe%t.pipe.timeGap===0&&(this.createPipe(),this.soundSwoosh.play())}hitBird(){console.log("gameover"),this.soundHit.play(),this.soundDie.play(),this.physics.pause(),this.gameOver=!0,this.ground.anims.play(t.ground.animate.stop,!0),this.player.anims.play(t.birdRed.animate.stop,!0),this.gameOverInfo.visible=!0,this.restart.visible=!0}updateScore(e,a){a.destroy(),this.soundPoint.play(),this.score++,this.updateScoreBoard()}updateScoreBoard(){this.scoreGroup.clear(!0,!0);const e=t.nums.widht,a=this.score.toString(),p=a.length;let u=t.scene.width/2-p*e/2;for(let o=0;o<p;o++){const n=`num${a[o]}`;this.scoreGroup.create(u+e*o,30,t.nums.static[n]).setDepth(30)}}}const _=y({__name:"index",setup(h){const r=b();return v(()=>{const{width:e,height:a}=t.scene,p=new l.Game({type:l.AUTO,parent:r.value,width:e,height:a,scene:[G,S],physics:{default:"arcade",arcade:{gravity:{y:t.scene.gravity},debug:!1}}}),{innerWidth:u,innerHeight:o}=window;if(u<o)p.canvas.style.cssText=`width: ${u}px; height: ${o}px; margin: 0 auto`;else{let n=e/a*o;p.canvas.style.cssText=`width: ${n}px; height: ${o}px; margin: 0 auto`}}),(e,a)=>(B(),w("div",{class:"viewCon",ref_key:"con",ref:r},null,512))}});const M=x(_,[["__scopeId","data-v-043886dc"]]);export{M as default};
